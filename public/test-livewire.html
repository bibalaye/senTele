<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Livewire Click</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
            font-family: Arial, sans-serif;
        }
        .card {
            background: #2a2a2a;
            padding: 20px;
            margin: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .card:hover {
            background: #3a3a3a;
            transform: scale(1.02);
        }
        .info {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .log {
            background: #1a1a1a;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }
        .success { color: #0f0; }
        .error { color: #f00; }
    </style>
</head>
<body>
    <div class="info">
        <h1>üß™ Test Livewire Click</h1>
        <p>Diagnostic pour comprendre pourquoi le clic ne fonctionne pas</p>
    </div>

    <div class="info">
        <h3>Tests √† faire :</h3>
        <ol>
            <li>Ouvrir la console (F12)</li>
            <li>Aller sur <code>http://localhost/channels</code></li>
            <li>Cliquer sur une carte de cha√Æne</li>
            <li>Copier/coller les messages de la console ici</li>
        </ol>
    </div>

    <div class="info">
        <h3>V√©rifications dans la console :</h3>
        <div class="log">
            <div>// V√©rifier que Livewire est charg√©</div>
            <div class="success">console.log(typeof Livewire); // Devrait afficher "object"</div>
            <br>
            <div>// V√©rifier les composants Livewire</div>
            <div class="success">console.log(Livewire.all()); // Devrait afficher un tableau</div>
            <br>
            <div>// V√©rifier les erreurs</div>
            <div class="success">// Regarder s'il y a des erreurs en rouge</div>
        </div>
    </div>

    <div class="info">
        <h3>Probl√®mes possibles :</h3>
        
        <div class="card">
            <h4>‚ùå Livewire non charg√©</h4>
            <p><strong>Sympt√¥me :</strong> <code>Livewire is not defined</code></p>
            <p><strong>Solution :</strong> V√©rifier que <code>@vite</code> est dans le layout</p>
        </div>

        <div class="card">
            <h4>‚ùå Erreur JavaScript</h4>
            <p><strong>Sympt√¥me :</strong> Erreur en rouge dans la console</p>
            <p><strong>Solution :</strong> Corriger l'erreur JavaScript</p>
        </div>

        <div class="card">
            <h4>‚ùå wire:click mal form√©</h4>
            <p><strong>Sympt√¥me :</strong> Aucune erreur mais rien ne se passe</p>
            <p><strong>Solution :</strong> V√©rifier la syntaxe du wire:click</p>
        </div>

        <div class="card">
            <h4>‚ùå Composant non initialis√©</h4>
            <p><strong>Sympt√¥me :</strong> <code>Cannot read property 'call' of undefined</code></p>
            <p><strong>Solution :</strong> V√©rifier que le composant Livewire est bien mont√©</p>
        </div>
    </div>

    <div class="info">
        <h3>Script de diagnostic :</h3>
        <p>Copiez/collez ce code dans la console de <code>/channels</code> :</p>
        <div class="log">
            <pre style="color: #0f0;">
// Diagnostic complet
console.log('=== DIAGNOSTIC LIVEWIRE ===');
console.log('1. Livewire charg√© ?', typeof Livewire !== 'undefined' ? '‚úÖ' : '‚ùå');
console.log('2. Composants Livewire :', Livewire?.all()?.length || 0);
console.log('3. HLS.js charg√© ?', typeof Hls !== 'undefined' ? '‚úÖ' : '‚ùå');

// Tester le clic manuellement
const firstCard = document.querySelector('[wire\\:click*="selectChannel"]');
console.log('4. Carte trouv√©e ?', firstCard ? '‚úÖ' : '‚ùå');
if (firstCard) {
    console.log('5. Attribut wire:click :', firstCard.getAttribute('wire:click'));
    console.log('6. Test de clic...');
    firstCard.click();
}
            </pre>
        </div>
    </div>

    <div class="info">
        <h3>üì∏ Capture d'√©cran attendue :</h3>
        <p>Apr√®s avoir ex√©cut√© le script ci-dessus, vous devriez voir :</p>
        <div class="log">
            <div class="success">=== DIAGNOSTIC LIVEWIRE ===</div>
            <div class="success">1. Livewire charg√© ? ‚úÖ</div>
            <div class="success">2. Composants Livewire : 1</div>
            <div class="success">3. HLS.js charg√© ? ‚úÖ</div>
            <div class="success">4. Carte trouv√©e ? ‚úÖ</div>
            <div class="success">5. Attribut wire:click : selectChannel(123)</div>
            <div class="success">6. Test de clic...</div>
        </div>
    </div>

    <script>
        // Auto-test si on est sur la bonne page
        if (window.location.pathname === '/channels') {
            setTimeout(() => {
                console.log('=== AUTO-DIAGNOSTIC ===');
                console.log('Livewire:', typeof Livewire !== 'undefined' ? '‚úÖ' : '‚ùå');
                console.log('HLS.js:', typeof Hls !== 'undefined' ? '‚úÖ' : '‚ùå');
                
                const cards = document.querySelectorAll('[wire\\:click*="selectChannel"]');
                console.log('Cartes trouv√©es:', cards.length);
                
                if (cards.length > 0) {
                    console.log('Premi√®re carte:', cards[0]);
                    console.log('wire:click:', cards[0].getAttribute('wire:click'));
                }
            }, 1000);
        }
    </script>
</body>
</html>
